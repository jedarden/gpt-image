## Prompt LS1_1

### Context
The project is a stateless web application for generating images using natural language prompts, with a backend that must securely interact with the OpenAI DALL·E API. API keys must never be exposed to the frontend.

### Task
Implement a backend HTTP POST route at `/api/generate-image` that accepts a JSON body with a `prompt` string and returns an image generated by the OpenAI DALL·E API.

### Requirements
- Accept a JSON payload: `{ "prompt": "A description of the image" }`
- Call the OpenAI DALL·E image generation endpoint with the provided prompt
- Return the generated image (or its URL) in the response
- Ensure the route is only accessible via POST

### Previous Issues
N/A (first layer)

### Expected Output
A backend route handler function and route registration code, ready to be integrated into the server.

---

## Prompt LS1_2

### Context
The backend must interact with the OpenAI API using a secret API key, which must not be exposed to the client or stored in source code.

### Task
Implement secure handling of the OpenAI API key for the image generation route.

### Requirements
- Load the OpenAI API key from an environment variable (e.g., `OPENAI_API_KEY`)
- Do not hardcode the API key anywhere in the codebase
- Ensure the API key is never sent to the frontend or logged

### Previous Issues
N/A

### Expected Output
Code for securely loading and using the API key, with comments explaining the approach.

---

## Prompt LS1_3

### Context
Robust error handling is required for production-quality APIs, especially when dealing with external services and user input.

### Task
Add comprehensive error handling to the image generation route.

### Requirements
- Validate the incoming request body and prompt field
- Return appropriate HTTP status codes and error messages for:
  - Missing or invalid input
  - OpenAI API errors (network, authentication, quota, etc.)
  - Unexpected server errors
- Log errors server-side without leaking sensitive information

### Previous Issues
N/A

### Expected Output
Error handling logic integrated into the route handler, with clear separation of error types and user-friendly error responses.

---

## Prompt LS1_4

### Context
Maintainable and testable code is essential for long-term project health.

### Task
Refactor the image generation logic to ensure modularity and testability.

### Requirements
- Separate the OpenAI API interaction into its own module/service
- Ensure the route handler is thin and delegates to the service
- Export functions in a way that allows for unit testing (e.g., dependency injection)
- Include at least one example unit test for the service

### Previous Issues
N/A

### Expected Output
A modular service for image generation, a refactored route handler, and an example test case.

---

## Prompt LS1_5

### Context
Clear documentation and example usage are required for all new API endpoints.

### Task
Document the `/api/generate-image` endpoint and provide example usage.

### Requirements
- Write API documentation (endpoint, method, request/response schema, error cases)
- Provide a sample `curl` command or code snippet for calling the endpoint
- Include notes on required environment variables and security considerations

### Previous Issues
N/A

### Expected Output
A markdown documentation block and example usage for the new API route.